<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Cat Viewer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #0f172a;
      color: #f8fafc;
      font-family: system-ui, -apple-system, sans-serif;
    }
    .fade-enter {
      animation: fadeIn 0.5s ease-in;
    }
    .fade-exit {
      animation: fadeOut 0.5s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes fadeOut {
      from { opacity: 1; transform: scale(1); }
      to { opacity: 0; transform: scale(0.95); }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
  <div class="max-w-2xl w-full">
    <div class="bg-slate-800 rounded-2xl shadow-2xl p-8">
      <!-- Header -->
      <div class="text-center mb-8">
        <div class="flex items-center justify-center gap-3 mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-purple-400">
            <path d="M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"></path>
            <path d="M8 14v.5"></path>
            <path d="M16 14v.5"></path>
            <path d="M11.25 16.25h1.5L12 17l-.75-.75Z"></path>
          </svg>
          <h1 class="text-4xl text-slate-100">Random Cat Viewer</h1>
        </div>
        <p class="text-slate-400">Click the button to see adorable cats from the internet!</p>
      </div>

      <!-- Counter -->
      <div class="bg-slate-700 rounded-lg p-4 mb-6 text-center">
        <p class="text-slate-300">Cats Seen</p>
        <p class="text-3xl text-purple-400" id="counter">0</p>
      </div>

      <!-- Cat Image Container -->
      <div class="bg-slate-700 rounded-lg p-4 mb-6 min-h-[400px] flex items-center justify-center overflow-hidden">
        <div id="imageContainer" class="w-full h-full flex items-center justify-center">
          <p class="text-slate-400">No cat yet... Click the button below!</p>
        </div>
      </div>

      <!-- Cat Info Container -->
      <div id="catInfo" class="hidden bg-slate-700 rounded-lg p-4 mb-6">
        <!-- Cat Fact -->
        <div class="mb-4">
          <h3 class="text-purple-400 mb-2">üêæ Cat Fact</h3>
          <p class="text-slate-300 text-sm" id="catFact"></p>
        </div>
        
        <!-- Breed Info -->
        <div id="breedInfo" class="hidden">
          <h3 class="text-purple-400 mb-2">üìã Breed Information</h3>
          <div class="text-slate-300 text-sm space-y-1">
            <p><span class="text-slate-400">Breed:</span> <span id="breedName"></span></p>
            <p><span class="text-slate-400">Origin:</span> <span id="breedOrigin"></span></p>
            <p><span class="text-slate-400">Temperament:</span> <span id="breedTemperament"></span></p>
            <p class="mt-2" id="breedDescription"></p>
          </div>
        </div>
      </div>

      <!-- Buttons -->
      <div class="flex gap-4">
        <button 
          id="fetchBtn"
          class="flex-1 bg-purple-600 hover:bg-purple-700 text-white py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"></path>
            <path d="M8 14v.5"></path>
            <path d="M16 14v.5"></path>
            <path d="M11.25 16.25h1.5L12 17l-.75-.75Z"></path>
          </svg>
          Show Me a Cat!
        </button>
      </div>
    </div>
  </div>

  <script>
    const catFacts = [
      "Cats spend 70% of their lives sleeping, which means a 9-year-old cat has been awake for only three years of its life.",
      "A group of cats is called a 'clowder' and a group of kittens is called a 'kindle'.",
      "Cats have over 20 vocalizations, including the purr, meow, chirp, and hiss.",
      "A cat's purr vibrates at a frequency of 25 to 150 Hertz, which is the same frequency at which muscles and bones repair themselves.",
      "Cats can rotate their ears 180 degrees and can move each ear independently.",
      "The world's longest cat measured 48.5 inches long.",
      "Cats have a third eyelid called a 'nictitating membrane' that helps protect their eyes.",
      "A cat's nose print is as unique as a human fingerprint.",
      "Cats can jump up to six times their length in a single bound.",
      "Ancient Egyptians would shave off their eyebrows when their cats died as a sign of mourning.",
      "Cats have more than 100 vocal sounds, while dogs only have about 10.",
      "A cat's brain is biologically more similar to a human brain than it is to a dog's.",
      "Cats walk like camels and giraffes: they move both of their right feet first, then move both of their left feet.",
      "Adult cats only meow to communicate with humans, not with other cats.",
      "Cats can't taste sweetness due to a genetic mutation in their taste receptors."
    ];

    let catCount = parseInt(localStorage.getItem('catViewerCount') || '0', 10);
    let currentImage = null;
    
    // Initialize counter display
    document.getElementById('counter').textContent = catCount;

    document.getElementById('fetchBtn').addEventListener('click', async () => {
      const btn = document.getElementById('fetchBtn');
      const imageContainer = document.getElementById('imageContainer');
      const counter = document.getElementById('counter');
      const catInfo = document.getElementById('catInfo');
      const catFactEl = document.getElementById('catFact');
      const breedInfo = document.getElementById('breedInfo');

      btn.disabled = true;
      btn.innerHTML = 'Loading...';

      try {
        // Fetch from The Cat API
        const response = await fetch('https://api.thecatapi.com/v1/images/search?has_breeds=1');
        const data = await response.json();
        
        let catUrl = '';
        let hasBreed = false;

        if (data[0]?.breeds && data[0].breeds.length > 0) {
          catUrl = data[0].url;
          hasBreed = true;
          const breed = data[0].breeds[0];
          
          document.getElementById('breedName').textContent = breed.name;
          document.getElementById('breedOrigin').textContent = breed.origin;
          document.getElementById('breedTemperament').textContent = breed.temperament;
          document.getElementById('breedDescription').textContent = breed.description;
          breedInfo.classList.remove('hidden');
        } else {
          const timestamp = new Date().getTime();
          catUrl = `https://cataas.com/cat?timestamp=${timestamp}`;
          breedInfo.classList.add('hidden');
        }

        // Random cat fact
        const randomFact = catFacts[Math.floor(Math.random() * catFacts.length)];
        catFactEl.textContent = randomFact;

        // Preload image
        const img = new Image();
        img.onload = () => {
          // Remove old image with fade out
          if (currentImage) {
            currentImage.classList.add('fade-exit');
            setTimeout(() => {
              currentImage.remove();
              showNewImage();
            }, 500);
          } else {
            showNewImage();
          }

          function showNewImage() {
            imageContainer.innerHTML = '';
            const newImg = document.createElement('img');
            newImg.src = catUrl;
            newImg.className = 'max-w-full max-h-[400px] rounded-lg fade-enter';
            newImg.alt = 'Random cat';
            imageContainer.appendChild(newImg);
            currentImage = newImg;

            catCount++;
            localStorage.setItem('catViewerCount', catCount.toString());
            counter.textContent = catCount;
            catInfo.classList.remove('hidden');
          }

          btn.disabled = false;
          btn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"></path>
              <path d="M8 14v.5"></path>
              <path d="M16 14v.5"></path>
              <path d="M11.25 16.25h1.5L12 17l-.75-.75Z"></path>
            </svg>
            Show Me a Cat!
          `;
        };
        img.onerror = () => {
          alert('Failed to load cat image. Please try again!');
          btn.disabled = false;
          btn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"></path>
              <path d="M8 14v.5"></path>
              <path d="M16 14v.5"></path>
              <path d="M11.25 16.25h1.5L12 17l-.75-.75Z"></path>
            </svg>
            Show Me a Cat!
          `;
        };
        img.src = catUrl;
      } catch (error) {
        alert('Failed to fetch cat image. Please try again!');
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>